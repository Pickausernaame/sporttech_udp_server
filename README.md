# sporttech_udp_server
### Команды для запуска UDP SERVER'a с помощью Docker :
Прежде чем запустить батчер проверте что у вас валидный IP. Для этого по команде `ifconfig` узнайте свой внешний IP. Далее внесите в `.env` в поле `IP_ENV` ваш IP адрес. Порт можно оставить таким же. Точно такие же IP и PORT вам надо указать при перепрошивке железки. Далее для получения доступа к I/O потокам приложения запуститите UDP SERVER командой: 

```
cd UDPServer
sudo docker-compose up --build -d && sudo docker attach batcher
```

После запуска батчера происходит проверка прокси. Далее необходимо заполнить информацию о тренировке. После того как заполните все поля корректно, батчер начнет хэндлить udp соединение. Для того чтобы закончить тренировку нажмите ESC. После этого батчер отправит все в телеграм бота.


Внимание, handle-функция блокирует обработку нажатия ESC и если железка не стреляет в UDP SERVER, то единственный способ остановить процесс - вырубить докер контейнер. 

```
sudo docker stop batcher
```

В файле .env лежат переменные окружения:
- `IP_ENV` IP адрес UDP сервера
- `PORT_ENV`  Порт, на котором развернут UDP SERVER.
- `URL_ENV` URL на который будут посылаться батчи.
- `BATCH_CAP_ENV` Размер батча.
- `DEVICE_ID_ENV` ID устройства.
